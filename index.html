<!DOCTYPE html>
<html lang="en">
  <head>
    
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    
    <title>wayPN</title>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Kadwa:wght@400&display=swap" />
    <link rel="stylesheet" href="index.css" />
    

  </head>
  <body>
    
    <div class="main-container">

      

      <section class="profile-group hidden" id="section">

        <div class="background-1"></div>
        <div class="logo"></div>
        <span class="balance-text">0 WPN</span>
        <div class="instruction-button-wpn">
          <button id="instruction-btn-id" class="text-f">Что такое WPN?</button>
        </div>
        
        <div class="emoji"></div>

      </section>


      <section class="day-count-group hidden" id="section">
      
        <div class="background-2"></div>
        <span class="days-data">0 Дней</span>
        <span class="days-title">С нами уже</span>
        <div class="calendar-day"><div class="union"></div></div>
      
      </section>
      
      <section class="topup-group hidden" id="section">
        
        <div class="background-3"></div>
        <span class="top-up-balance-title">Пополнить Баланс</span>
        
        <button class="coins-input-field">
          <input type="number" onfocus="this.value=''" id="input-balance" value="90" class="input-balance"></input>
        </button>
        
        <button class="top-up-button" id="topup_button">
          <span class="text">Пополнить</span>
          <div class="image"></div>
          <span class="coins__inner">
            <span class="coins__blobs">
              <span class="coins__blob"></span>
              <span class="coins__blob"></span>
              <span class="coins__blob"></span>
              <span class="coins__blob"></span>
            </span>
          </span>
        </button>
        <br/>

        <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
          <defs>
            <filter id="goo">
              <feGaussianBlur in="SourceGraphic" result="blur" stdDeviation="10"></feGaussianBlur>
              <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 21 -7" result="goo"></feColorMatrix>
              <feBlend in2="goo" in="SourceGraphic" result="mix"></feBlend>
            </filter>
          </defs>
        </svg>

        
        <div class="coin-buttons">

            <button class="coins" id="coin-30">
              <span class="text-6">30 WPN</span>
              <span class="coins__inner">
                <span class="coins__blobs">
                  <span class="coins__blob"></span>
                  <span class="coins__blob"></span>
                  <span class="coins__blob"></span>
                  <span class="coins__blob"></span>
                </span>
              </span>
            </button>
            <br/>

          <button class="coins-7" id="coin-60">
            <span class="text-6">60 WPN</span>
            <span class="coins__inner">
              <span class="coins__blobs">
                <span class="coins__blob"></span>
                <span class="coins__blob"></span>
                <span class="coins__blob"></span>
                <span class="coins__blob"></span>
              </span>
            </span>
          </button>
          <br/>
            
          <button class="coins-a" id="coin-90">
            <span class="text-c">90 WPN</span>
            <span class="coins__inner">
              <span class="coins__blobs">
                <span class="coins__blob"></span>
                <span class="coins__blob"></span>
                <span class="coins__blob"></span>
                <span class="coins__blob"></span>
              </span>
            </span>
          </button>
          <br/>
            
          
          <button class="coins-e" id="coin-180">
            <span class="text-e">180 WPN</span>
            <span class="coins__inner">
              <span class="coins__blobs">
                <span class="coins__blob"></span>
                <span class="coins__blob"></span>
                <span class="coins__blob"></span>
                <span class="coins__blob"></span>
              </span>
            </span>
          </button>
          <br/>
      
          <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
            <defs>
              <filter id="goo">
                <feGaussianBlur in="SourceGraphic" result="blur" stdDeviation="10"></feGaussianBlur>
                <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 21 -7" result="goo"></feColorMatrix>
                <feBlend in2="goo" in="SourceGraphic" result="mix"></feBlend>
              </filter>
            </defs>
          </svg>

        </div>
        
        <div class="promocode-button">
          <button id="promo-btn" class="text-f">У меня есть Промокод</button>
        </div>
        <div class="value-title-block">
          <span id="value-title" class="value-title">1 WPN = 1 ₽</span>
        </div>
      
      </section>

      <section class="news-group hidden" id="section">

        <div class="back-frame"><div class="background-10"></div></div>
        <span class="news-title">WayPN</span>
        <span class="description-title" >Актуальные Новости Проекта</span>
      </section>

      
      <section class="keys-group hidden" id="section">
        
        <div class="server-group">
          
          <span class="servers-title">Серверы</span>
          
          <div class="flex-row-a">
            
            <span class="region-title">Регион</span>
            <span class="region-data">Амстердам</span>
          
            <div class="image-11"></div>
          
          </div>
          
          <div class="flex-row-be">
            
            <span class="status-title">Статус</span>
            <span class="status-data">Активный</span>
        
            <div class="ellipse"></div>
        
          </div>
        
        </div>
        
        <div class="background-12"></div>
        
        <div class="key-group">
          
          <span class="key-title">КЛЮЧ ДОСТУПА</span>
          
          <div class="flex-row-efe">
            
            <div class="background-13"></div>
            
            <span class="key-data"></span>
            
            <button class="outline-button">
              
              <div class="outline-image"></div>  
              <div class="blur-obj"></div>
            
            </button>
          
          </div>

          <div ontouchstart="">
            <button class="btn-inst">
              <span class="text-instruction">Инструкция</span>
            </button>
          </div>

        </div>

      </section>

      <section class="ref-container hidden" id="section">
        <div class="refpromo-group">
          <div class="background-refgroup">
            <div class="refsection">
              <span class="ref-title">Ваша реферальная ссылка</span>
              <div class="flex-row-fc">
                <div class="link-text-field">
                  <span class="text-link"></span>
                </div>
                
                <!-- <button class="link-button">
                  <span class="link-title">Поделиться</span>
                  <div class="link-emoji">
                  </div>
                </button> -->

                
                <button class="link-button">
                  <span class="link-title">Поделиться</span>
                  <span class="link-button__inner">
                    <span class="link-button__blobs">
                      <span class="link-button__blob"></span>
                      <span class="link-button__blob"></span>
                      <span class="link-button__blob"></span>
                      <span class="link-button__blob"></span>
                    </span>
                  </span>
                </button>
              
                
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
                  <defs>
                    <filter id="goo">
                      <feGaussianBlur in="SourceGraphic" result="blur" stdDeviation="10"></feGaussianBlur>
                      <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 21 -7" result="goo"></feColorMatrix>
                      <feBlend in2="goo" in="SourceGraphic" result="mix"></feBlend>
                    </filter>
                  </defs>
                </svg>


              
              </div>
            </div>
            <div class="ref-friend-section">
              <div class="flex-row-cb">
                <div class="friend-emoji"><div class="vector"></div></div>
                <span class="friend-title">Приглашено Друзей:</span
                ><span class="ref-title-1"></span>
              </div>
              <div class="flex-row-f">
                <div class="active-friend-emoji">
                  <div class="vector-2"></div>
                </div>
                <span class="active-friends-title">Активных Друзей:</span
                ><span class="active-ref-title"></span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <script>

        const sections = document.querySelectorAll('section');
             
        document.addEventListener("DOMContentLoaded", function() {
          sections.forEach((section, index) => {
            section.style.transform = 'translateX(-100%)';
            section.style.opacity = 0;
            setTimeout(() => {
              section.classList.add('show');
              section.style.transform = 'translateX(0)';
              section.style.opacity = 1;
            }, index * 500); // adjust the delay as needed
          });
        });

        window.addEventListener("scroll", function() {

          sections.forEach((section, index) => {
            const rect = section.getBoundingClientRect();
            const isVisible = rect.top <= window.innerHeight && rect.bottom >= 0;

            if (isVisible) {
              section.classList.add('show');
              section.style.transform = 'translateX(0)';
              section.style.opacity = 1;
            } else {
              section.classList.remove('show');
              section.style.transform = 'translateX(-100%)';
              section.style.opacity = 0;
            }
          });
        });


      </script>


      <script>

        const coinButtons = document.querySelectorAll('.coins,.coins-7,.coins-a,.coins-e');
        const inputBalance = document.getElementById('input-balance');

        coinButtons.forEach((button) => {
          button.addEventListener('click', () => {
            const coinValue = button.textContent.trim().replace(' WPN', '');
            inputBalance.value = coinValue;
          });
        });

      </script>


      <script>
        const keyDataElement = document.querySelector('.key-data');

        keyDataElement.addEventListener('click', () => {
          const text = keyDataElement.textContent;
          const textarea = document.createElement('textarea');
          textarea.value = text;
          document.body.appendChild(textarea);
          textarea.select();
          document.execCommand('copy');
          document.body.removeChild(textarea);

          tg_app.showAlert("🔑 Ключ Скопирован!");

          window.location.href = 'outline://';
        });


        const LinkDataElement = document.querySelector('.text-link');

        LinkDataElement.addEventListener('click', () => {
          const text = LinkDataElement.textContent;
          const textarea = document.createElement('textarea');
          textarea.value = text;
          document.body.appendChild(textarea);
          textarea.select();
          document.execCommand('copy');
          document.body.removeChild(textarea);

          tg_app.showAlert("🔗 Реферальная Ссылка Скопирована!");
        });

        const promocode_button = document.getElementById('promo-btn');

        promocode_button.addEventListener('click', () => {
          tg_app.showAlert("💡 Чтобы Воспользоваться Промокодом, перейдите в Бота и зайдите в Раздел 'Пополнить Баланс'");
        });
      </script>
     
      <script>
        let tg_app = window.Telegram.WebApp;

        const urlParams = new URLSearchParams(window.location.search);

        const customData = {
          chatId: urlParams.get('chatid'),
          balance: urlParams.get('balance'),
          days: urlParams.get('days'),
          key: urlParams.get('key'),
          ref_friend: urlParams.get('ref_friend'),
          ref_active: urlParams.get('ref_active'),
          after_pay: urlParams.get('after_pay'),
        };

        const balance_text = document.querySelector('.balance-text');
        const days_text = document.querySelector('.days-data');
        const key_text = document.querySelector('.key-data');
        const ref_friend_text = document.querySelector('.ref-title-1');
        const ref_active_text = document.querySelector('.active-ref-title');
        const ref_url_text = document.querySelector('.text-link');

        balance_text.innerHTML = customData["balance"] + " WPN";
        days_text.innerHTML = customData["days"] + " Дней ";

        if (customData["key"] != "0")
        {
          key_text.innerHTML = customData["key"];
        }
        else
        {
          key_text.innerHTML = "\t\tСначала Пополните Баланс";
        }

        ref_friend_text.innerHTML = customData["ref_friend"];
        ref_active_text.innerHTML = customData["ref_active"];

        let url_ref = "t.me/waypnbot?start=" + customData["chatId"];
        ref_url_text.innerHTML = url_ref;

        let url = "https://htmlcolorcodes.com/";
        let url_tg = "https://t.me/share/url?url=" + url_ref;
        
        let url_outline_ios = "https://apps.apple.com/app/id1356177741";
        let url_outline_android = "https://play.google.com/store/apps/details?id=org.outline.android.client";
        let url_outline_microsoft = "https://www.google.com/search?q=outline&sca_esv=8d80fa77a849e0b7&sca_upv=1&sxsrf=ADLYWIKbpCc5uJH9pJ83gRrLpLSDCR3M4g%3A1721945087978&ei=_8uiZvudO8rGwPAPu-Tw8Qk&ved=0ahUKEwi7maqqmcOHAxVKIxAIHTsyPJ4Q4dUDCA8&uact=5&oq=outline&gs_lp=Egxnd3Mtd2l6LXNlcnAiB291dGxpbmUyChAjGIAEGCcYigUyBBAjGCcyChAjGIAEGCcYigUyEBAAGIAEGLEDGIMBGBQYhwIyEBAAGIAEGLEDGIMBGBQYhwIyCxAAGIAEGLEDGIMBMgsQABiABBixAxiDATIFEAAYgAQyBRAAGIAEMhEQLhiABBixAxjHARiOBRivAUjHCVCrAlirAnABeAGQAQCYAVygAVyqAQExuAEDyAEA-AEBmAICoAJlwgIKEAAYsAMY1gQYR8ICDRAAGIAEGLADGEMYigWYAwCIBgGQBgqSBwEyoAekDQ&sclient=gws-wiz-serp";
        let url_outline_mac = "https://www.google.com/search?q=outline&sca_esv=8d80fa77a849e0b7&sca_upv=1&sxsrf=ADLYWIKbpCc5uJH9pJ83gRrLpLSDCR3M4g%3A1721945087978&ei=_8uiZvudO8rGwPAPu-Tw8Qk&ved=0ahUKEwi7maqqmcOHAxVKIxAIHTsyPJ4Q4dUDCA8&uact=5&oq=outline&gs_lp=Egxnd3Mtd2l6LXNlcnAiB291dGxpbmUyChAjGIAEGCcYigUyBBAjGCcyChAjGIAEGCcYigUyEBAAGIAEGLEDGIMBGBQYhwIyEBAAGIAEGLEDGIMBGBQYhwIyCxAAGIAEGLEDGIMBMgsQABiABBixAxiDATIFEAAYgAQyBRAAGIAEMhEQLhiABBixAxjHARiOBRivAUjHCVCrAlirAnABeAGQAQCYAVygAVyqAQExuAEDyAEA-AEBmAICoAJlwgIKEAAYsAMY1gQYR8ICDRAAGIAEGLADGEMYigWYAwCIBgGQBgqSBwEyoAekDQ&sclient=gws-wiz-serp";

        const newsGroup = document.querySelector('.news-group');
        const newsTextElements = newsGroup.querySelectorAll('span');
        const insButton = document.querySelector('.instruction-button-wpn');
        const insMainButton = document.querySelector('.text-instruction');
        const shareButton = document.querySelector('.link-button');
        const outlineButton = document.querySelector('.outline-button');
        const coin_30 = document.querySelector('.coins');
        const coin_60 = document.querySelector('.coins-7');
        const coin_90 = document.querySelector('.coins-a');
        const coin_180 = document.querySelector('.coins-e');
        const value_title = document.querySelector('.value-title');

        const userAgent = navigator.userAgent;
        
        // newsGroup.addEventListener('click', () => {
        //   window.location.href = url; // replace with your desired URL
        // });

        // newsTextElements.forEach((textElement) => {
        //   textElement.addEventListener('click', () => {
        //     window.location.href = url; // replace with your desired URL
        //   });
        // });

        const news_Group = document.querySelector('.news-group');
        const news_TextElements = news_Group.querySelectorAll('span');

        news_TextElements.forEach((textElement) => {
          textElement.addEventListener('click', () => {
            window.location.href = 'https://t.me/waypnblog'
          });
        });

        insButton.addEventListener('click', () => {
          window.location.href = "https://telegra.ph/WayPN-Instrukciya-polzovaniya-07-08"; // replace with your desired URL
        });

        insMainButton.addEventListener('click', () => {
          window.location.href = "https://telegra.ph/WayPN-Instrukciya-polzovaniya-07-08"; // replace with your desired URL
        });

        shareButton.addEventListener('click', () => {
          window.location.href = url_tg; // replace with your desired URL
        });

        outlineButton.addEventListener('click', () =>{
           window.location.href = 'outline://';
        });

        coin_30.addEventListener('click', ()=>{
          value_title.innerHTML = "30 WPN = 10 Дней";
        })
        coin_60.addEventListener('click', ()=>{
          value_title.innerHTML = "60 WPN = 20 Дней";
        })
        coin_90.addEventListener('click', ()=>{
          value_title.innerHTML = "90 WPN = 30 Дней";
        })
        coin_180.addEventListener('click', ()=>{
          value_title.innerHTML = "180 WPN = 60 Дней";
        })

        // console.log(`https://p0lz0vatel.github.io?chatid=${customData["chatId"]}&balance=${customData["balance"]}&days=${customData["days"]}&key=${customData["key"]}&ref_friend=${customData["ref_friend"]}&ref_active=${customData["ref_active"]}&after_pay=1`);


        let topup_button = document.getElementById("topup_button"); // not "top-up-button"

        topup_button.addEventListener("click", () => {
          let coins_count = document.getElementById("input-balance").value;

          tg_app.showConfirm("💡 Пополнить на " + coins_count + " WPN" + " (Минимальная Сумма - 10)", (confirmed) => {
            if (confirmed)
            {
              try 
              {
                var refactor_count = Number(coins_count);
                
                if(refactor_count > 10)
                {
                  let after_pay_url = "https://p0lz0vatel.github.io?after_pay=1";
                  let payment_url = "https://yoomoney.ru/quickpay/confirm.xml?receiver=4100118742841217&quickpay-form=shop&targets=WayPn&paymentType=SB&sum=" + refactor_count + "&label=" + customData["chatId"] + "&successURL=" + after_pay_url;

                  console.log(payment_url);

                  window.location.href = payment_url;
                }
              }
              catch (error)
              {
                console.log(error);
              }
            } 
            
            else 
            {
              console.log('User cancelled the action');
            }
          })          

        });

        if (customData["after_pay"] == "1")
        {
          tg_app.showAlert("💡 Перезайдите в Mini App после получения Сообщение об Оплате", (confirm) => {
            tg_app.close();
          });
        }

      </script>

    </div>
    

    


  </body>
</html>
